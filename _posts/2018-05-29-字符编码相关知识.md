# 字节、位的基础知识

比特(位):英文bit, 是计算机晶体管的一种状态。

它表示通电与断电. 就是1与0, 真与假, 也是计算机最基本的传输单位.

考一下计算机基础知识，提问：

​    1byte(字节) = (N) bit

​    1字符 = (N) 字节

#### 晶体管在CPU中的作用

CPU的原始工作模式在了解CPU工作原理之前，我们先简单谈谈CPU是如何生产出来的。

CPU是在特别纯净的硅材料上制造的。一个CPU芯片包含上百万个精巧的晶体管。

因此，从这个意义上说，CPU正是由晶体管组合而成的。简单而言，晶体管就是微型电子电子开关，它们是构建CPU的基石，你可以把一个晶体管当作一个电灯开关，它们有个操作位，分别代表两种状态：ON（开）和OFF（关）。

#### 字节的基础知识

​    八位的字节一共可以组合出256(2的8次方)种不同的状态。 

​    其中从0开始到31，这32种状态分别规定了特殊的用途，一但终端、打印机遇上约定好的这些字节被传过来时，就要做一些约定的动作。

​    比如：遇上 0x0a, 终端就换行，遇上0x07, 终端就向人们嘟嘟叫，遇上0x1b, 打印机就打印反白的字，或者终端就用彩色显示字母。

​    我们把这些0x1F(31)以下的字节状态称为"控制码”。

## 字符编码

#### 什么是字符编码？

​    通俗的来说，字符编码就是按照某种格式某种规定将字符存储在计算机中。

#### 0. ASCII码

​    所有的空格、标点符号、数字、大小写字母分别用连续的字节状态表示，一直到第127号，这样计算机就可以用不同字节来存储英语的文字了。

​    这个方案叫做 ANSI 的"Ascii"编码 （American Standard Code for Information Interchange，美国信息互换标准代码）。

​    后来，就像建造巴比伦塔一样，世界各地的都开始使用计算机，但是很多国家用的不是英文，他们的字母里有许多是ASCII里没有的，为了可以在计算机保存他们的文字，他们决定采用127号之后的空位来表示这些新的字母、符号，还加入了很多画表格时需 要用到的横线、竖线、交叉等形状，一直把序号编到了最后一个状态255。从128到255这一页的字符集被称"扩展字符集"。

#### 1. GB2312

规定: 一个小于127的字符的意义与原来相同, 但两个大于127的字符连在一起时, 就表示

一个汉字, 前面的一个字节(他称之为高字节)从0xA1用到 0xF7, 后面一个字节(低字节)

从0xA1到0xFE, 这样我们就可以组合出大约7000多个简体汉字了. 在这些编码里, 我们还

把数学符号,罗马希腊的 字母,日文的假名们都编进去了, 连在 ASCII 里本来就有的数字

,标点,字母都统统重新编了两个字节长的编码, 这就是常说的"全角"字符, 而原来在127

号以下的那些就叫"半角"字符了.(二个字节都要大于127)

中国人民看到这样很不错, 于是就把这种汉字方案叫做 "GB2312". GB2312 是对 ASCII

的中文扩展. 

#### 2. GBK

但是中国的汉字太多了, 我们很快就发现有许多人的人名没有办法在这里打出来, 特别

是某些很会麻烦别人的国家领导人. 于是我们不得不继续把 GB2312 没有用到的码位找出

来老实不客气地用上.

后来还是不够用, 于是干脆不再要求低字节一定是127号之后的内码, 只要第一个字节是

大于127就固定表示这是一个汉字的开始, 不管后面跟的是不是扩展字 符集里的内容. 结

果扩展之后的编码方案被称为 "GBK" 标准, GBK 包括了 GB2312 的所有内容, 同时又增

加了近20000个新的汉字(包括繁体字)和符号.

只要求第一个字节大于127.小于127的还是使用一个字节表示。

#### 3. Unicode

Unicode也是一种字符编码方法，不过它是由国际组织设计，可以容纳全世界所有语言文字的编码方案。Unicode的学名是"Universal Multiple-Octet Coded Character Set"，简称为UCS。UCS可以看作是"Unicode Character Set"的缩写。Unicode（[统一码](http://baike.baidu.com/view/3688170.htm)、万国码、单一码）是计算机科学领域里的一项业界标准,包括字符集、编码方案等。Unicode 是为了解决传统的字符编码方案的局限而产生的，它为每种语言中的每个字符设定了统一并且唯一的[二进制](http://baike.baidu.com/view/18536.htm)编码，以满足跨语言、跨平台进行文本转换、处理的要求。

UCS只是规定如何编码，并没有规定如何传输、保存这个编码。

例如“汉”字的UCS编码是6C49，可以用4个ascii数字来传输、保存这个编码；也可以用utf-8编码:3个连续的字节E6 B1 89来表示它。关键在于通信双方都要认可。UTF-8的一个特别的好处是它与[ISO-8859-1](https://baike.baidu.com/item/ISO-8859-1/7878872?fr=aladdin)完全兼容。UTF是“UCS Transformation Format”的缩写。UTF是为了unicode的传输和通信进行的编码。

#### 4. UTF编码

UTF-8就是以8位为单元对UCS进行编码。从UCS-2到UTF-8的编码方式如下：

| UCS-2编码(16进制) | UTF-8 字节流(二进制)       |
| ----------------- | -------------------------- |
| 0000 - 007F       | 0xxxxxxx                   |
| 0080 - 07FF       | 110xxxxx 10xxxxxx          |
| 0800 - FFFF       | 1110xxxx 10xxxxxx 10xxxxxx |

例如“汉”字的Unicode编码是6C49。6C49在0800-FFFF之间，所以肯定要用3字节模板了：1110xxxx 10xxxxxx 10xxxxxx。

将6C49写成二进制是：0110 110001 001001，用这个比特流依次代替模板中的x，得到：11100110 10110001 10001001，即E6 B1 89。

示例：通过xcode将字符串”汉”转换成utf-8时，实际内容值为："\xffffffe6\xffffffb1\xffffff89”

\x 就是UTF-8编码的意思

UTF-16以16位为单元对UCS进行编码。对于小于0x10000的UCS码，UTF-16编码就等于UCS码对应的16位无符号整数。对于不小于0x10000的UCS码，定义了一个算法。不过由于实际使用的UCS2，或者UCS4的BMP必然小于0x10000，所以就目前而言，可以认为UTF-16和UCS-2基本相同。但UCS-2只是一个编码方案，UTF-16却要用于实际的传输，所以就不得不考虑字节序的问题。

#### 5. UTF的字节序和BOM

UTF-8以字节为编码单元，没有字节序的问题。

UTF-16以两个字节为编码单元，在解释一个UTF-16文本前，首先要弄清楚每个编码单元的字节序。例如“奎”的Unicode编码是“594E”，“乙”的Unicode编码是“4E59”。如果收到UTF-16字节流“594E”，那么这是“奎”还是“乙”？

Unicode规范中推荐的标记字节顺序的方法是BOM。BOM不是“Bill Of Material”的BOM表，而是Byte Order Mark。 BOM是一个有点小聪明的想法：在UCS（Unicode Character Set）编码中有一个叫做“ZERO WIDTH NO-BREAK SPACE”的字符，它的编码是FEFF。而FFFE在UCS中是不存在的字符，所以不应该出现在实际传输中。UCS规范建议在传输字节流前，先传输字符“ZERO WIDTH NO-BREAK SPACE”。

这样如果接收者收到FEFF，就表明这个字节流是Big-Endian的；如果收到FFFE，就表明这个字节流是Little-Endian的。因此字符“ZERO WIDTH NO-BREAK SPACE”又被称作BOM。

UTF-8不需要BOM来表明字节顺序，但可以用BOM来表明编码方式。字符“ZERO WIDTH NO-BREAK SPACE”的UTF-8编码是EF BB BF。所以如果接收者收到以EF BB BF开头的字节流，就知道这是UTF-8编码了。Windows就是使用BOM来标记文本文件的编码方式的。

根据BOM的规则，在一段字节流开始时，如果接收到以下字节，则分别表明了该文本文件的编码。

UTF-8: EF BB BF

UTF-16 : FF FE

UTF-16 big-endian: FE FF

UTF-32 little-endian: FF FE 00 00

UTF-32 big-endian: 00 00 FE FF

而如果不是以这个开头，那程序则会以ANSI，也就是系统默认编码读取。

再来看一下大端（big-endian）、小端（little-endian），大端方式将高位存放在低地址，小端方式将高位存放在高地址。采用大端方式进行数据存放符合人类的正常思维，而采用小端方式进行数据存放利于计算机处理。

如同样是字符“A”﹐在以下几种格式中的存储形式分别是﹕

UTF-16 big-endian : 00 41

UTF-16 little-endian : 41 00

UTF-32 big-endian : 00 00 00 41

UTF-32 little-endian : 41 00 00 00





## 相对应的 ASCII码对照表（加强理解）

------

### ASCII控制字符

| 二进制    | 十进制 | 十六进制 | 缩写 | 可以显示的表示法 | 名称/意义                           |
| --------- | ------ | -------- | ---- | ---------------- | ----------------------------------- |
| 0000 0000 | 0      | 00       | NUL  | ␀                | 空字符（Null）                      |
| 0000 0001 | 1      | 01       | SOH  | ␁                | 标题开始                            |
| 0000 0010 | 2      | 02       | STX  | ␂                | 本文开始                            |
| 0000 0011 | 3      | 03       | ETX  | ␃                | 本文结束                            |
| 0000 0100 | 4      | 04       | EOT  | ␄                | 传输结束                            |
| 0000 0101 | 5      | 05       | ENQ  | ␅                | 请求                                |
| 0000 0110 | 6      | 06       | ACK  | ␆                | 确认回应                            |
| 0000 0111 | 7      | 07       | BEL  | ␇                | 响铃                                |
| 0000 1000 | 8      | 08       | BS   | ␈                | 退格                                |
| 0000 1001 | 9      | 09       | HT   | ␉                | 水平定位符号                        |
| 0000 1010 | 10     | 0A       | LF   | ␊                | 换行键                              |
| 0000 1011 | 11     | 0B       | VT   | ␋                | 垂直定位符号                        |
| 0000 1100 | 12     | 0C       | FF   | ␌                | 换页键                              |
| 0000 1101 | 13     | 0D       | CR   | ␍                | 归位键                              |
| 0000 1110 | 14     | 0E       | SO   | ␎                | 取消变换（Shift out）               |
| 0000 1111 | 15     | 0F       | SI   | ␏                | 启用变换（Shift in）                |
| 0001 0000 | 16     | 10       | DLE  | ␐                | 跳出数据通讯                        |
| 0001 0001 | 17     | 11       | DC1  | ␑                | 设备控制一（XON 启用软件速度控制）  |
| 0001 0010 | 18     | 12       | DC2  | ␒                | 设备控制二                          |
| 0001 0011 | 19     | 13       | DC3  | ␓                | 设备控制三（XOFF 停用软件速度控制） |
| 0001 0100 | 20     | 14       | DC4  | ␔                | 设备控制四                          |
| 0001 0101 | 21     | 15       | NAK  | ␕                | 确认失败回应                        |
| 0001 0110 | 22     | 16       | SYN  | ␖                | 同步用暂停                          |
| 0001 0111 | 23     | 17       | ETB  | ␗                | 区块传输结束                        |
| 0001 1000 | 24     | 18       | CAN  | ␘                | 取消                                |
| 0001 1001 | 25     | 19       | EM   | ␙                | 连接介质中断                        |
| 0001 1010 | 26     | 1A       | SUB  | ␚                | 替换                                |
| 0001 1011 | 27     | 1B       | ESC  | ␛                | 跳出                                |
| 0001 1100 | 28     | 1C       | FS   | ␜                | 文件分割符                          |
| 0001 1101 | 29     | 1D       | GS   | ␝                | 组群分隔符                          |
| 0001 1110 | 30     | 1E       | RS   | ␞                | 记录分隔符                          |
| 0001 1111 | 31     | 1F       | US   | ␟                | 单元分隔符                          |
| 0111 1111 | 127    | 7F       | DEL  | ␡                | 删除                                |

### ASCII可显示字符

| 二进制    | 十进制 | 十六进制 | 图形        |
| --------- | ------ | -------- | ----------- |
| 0010 0000 | 32     | 20       | （空格）(␠) |
| 0010 0001 | 33     | 21       | !           |
| 0010 0010 | 34     | 22       | "           |
| 0010 0011 | 35     | 23       | #           |
| 0010 0100 | 36     | 24       | $           |
| 0010 0101 | 37     | 25       | %           |
| 0010 0110 | 38     | 26       | &           |
| 0010 0111 | 39     | 27       | '           |
| 0010 1000 | 40     | 28       | (           |
| 0010 1001 | 41     | 29       | )           |
| 0010 1010 | 42     | 2A       | *           |
| 0010 1011 | 43     | 2B       | +           |
| 0010 1100 | 44     | 2C       | ,           |
| 0010 1101 | 45     | 2D       | -           |
| 0010 1110 | 46     | 2E       | .           |
| 0010 1111 | 47     | 2F       | /           |
| 0011 0000 | 48     | 30       | 0           |
| 0011 0001 | 49     | 31       | 1           |
| 0011 0010 | 50     | 32       | 2           |
| 0011 0011 | 51     | 33       | 3           |
| 0011 0100 | 52     | 34       | 4           |
| 0011 0101 | 53     | 35       | 5           |
| 0011 0110 | 54     | 36       | 6           |
| 0011 0111 | 55     | 37       | 7           |
| 0011 1000 | 56     | 38       | 8           |
| 0011 1001 | 57     | 39       | 9           |
| 0011 1010 | 58     | 3A       | :           |
| 0011 1011 | 59     | 3B       | ;           |
| 0011 1100 | 60     | 3C       | <           |
| 0011 1101 | 61     | 3D       | =           |
| 0011 1110 | 62     | 3E       | >           |
| 0011 1111 | 63     | 3F       | ?           |



| 二进制    | 十进制 | 十六进制 | 图形 |
| --------- | ------ | -------- | ---- |
| 0100 0000 | 64     | 40       | @    |
| 0100 0001 | 65     | 41       | A    |
| 0100 0010 | 66     | 42       | B    |
| 0100 0011 | 67     | 43       | C    |
| 0100 0100 | 68     | 44       | D    |
| 0100 0101 | 69     | 45       | E    |
| 0100 0110 | 70     | 46       | F    |
| 0100 0111 | 71     | 47       | G    |
| 0100 1000 | 72     | 48       | H    |
| 0100 1001 | 73     | 49       | I    |
| 0100 1010 | 74     | 4A       | J    |
| 0100 1011 | 75     | 4B       | K    |
| 0100 1100 | 76     | 4C       | L    |
| 0100 1101 | 77     | 4D       | M    |
| 0100 1110 | 78     | 4E       | N    |
| 0100 1111 | 79     | 4F       | O    |
| 0101 0000 | 80     | 50       | P    |
| 0101 0001 | 81     | 51       | Q    |
| 0101 0010 | 82     | 52       | R    |
| 0101 0011 | 83     | 53       | S    |
| 0101 0100 | 84     | 54       | T    |
| 0101 0101 | 85     | 55       | U    |
| 0101 0110 | 86     | 56       | V    |
| 0101 0111 | 87     | 57       | W    |
| 0101 1000 | 88     | 58       | X    |
| 0101 1001 | 89     | 59       | Y    |
| 0101 1010 | 90     | 5A       | Z    |
| 0101 1011 | 91     | 5B       | [    |
| 0101 1100 | 92     | 5C       | \    |
| 0101 1101 | 93     | 5D       | ]    |
| 0101 1110 | 94     | 5E       | ^    |
| 0101 1111 | 95     | 5F       | _    |



| 二进制    | 十进制 | 十六进制 | 图形 |
| --------- | ------ | -------- | ---- |
| 0110 0000 | 96     | 60       | `    |
| 0110 0001 | 97     | 61       | a    |
| 0110 0010 | 98     | 62       | b    |
| 0110 0011 | 99     | 63       | c    |
| 0110 0100 | 100    | 64       | d    |
| 0110 0101 | 101    | 65       | e    |
| 0110 0110 | 102    | 66       | f    |
| 0110 0111 | 103    | 67       | g    |
| 0110 1000 | 104    | 68       | h    |
| 0110 1001 | 105    | 69       | i    |
| 0110 1010 | 106    | 6A       | j    |
| 0110 1011 | 107    | 6B       | k    |
| 0110 1100 | 108    | 6C       | l    |
| 0110 1101 | 109    | 6D       | m    |
| 0110 1110 | 110    | 6E       | n    |
| 0110 1111 | 111    | 6F       | o    |
| 0111 0000 | 112    | 70       | p    |
| 0111 0001 | 113    | 71       | q    |
| 0111 0010 | 114    | 72       | r    |
| 0111 0011 | 115    | 73       | s    |
| 0111 0100 | 116    | 74       | t    |
| 0111 0101 | 117    | 75       | u    |
| 0111 0110 | 118    | 76       | v    |
| 0111 0111 | 119    | 77       | w    |
| 0111 1000 | 120    | 78       | x    |
| 0111 1001 | 121    | 79       | y    |
| 0111 1010 | 122    | 7A       | z    |
| 0111 1011 | 123    | 7B       | {    |
| 0111 1100 | 124    | 7C       | \|   |
| 0111 1101 | 125    | 7D       | }    |
| 0111 1110 | 126    | 7E       | ~    |



## 总结

​    一个字节有8位，一个字符在不同的编码情况下，包含的字节长度各不相同 

####     字符编码种类：

​            常见的有：ASCII、Unicode、UTF-8、GBK（简、繁体字融于一库）、GB2312（简体中文字符集）、BIG5（繁体中文字符集）

####     ASCII：

​        128个字符，总共33个控制符号，分别是第0~31 和 127，

​        剩余95个可显示的字符，包含用键盘敲下空白键所产生的空白字符也算1个可显示字符

​        这128个符号只占用了一个字节的后7位，最前第一位统一规定为0(最高为127，128的二进制表示为：10000000)

####     Unicode:

​        将世界上所有编码语言统一定义，每个字符所表示的编码代号都是独一无二的，向下兼容ASCII码。

​        Unicode简称为UCS

####     UTF-8:

​        UTF-8就是以8位为单元对UCS进行了编码，通俗来讲UTF-8是对Unicode字符集进行编码的一种编码方式